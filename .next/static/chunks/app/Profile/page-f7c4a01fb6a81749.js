(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[614],{7387:function(e,t,s){Promise.resolve().then(s.bind(s,815))},7907:function(e,t,s){"use strict";var a=s(5313);s.o(a,"redirect")&&s.d(t,{redirect:function(){return a.redirect}}),s.o(a,"useParams")&&s.d(t,{useParams:function(){return a.useParams}}),s.o(a,"usePathname")&&s.d(t,{usePathname:function(){return a.usePathname}})},3414:function(e,t,s){"use strict";var a=s(7437);s(2265),t.Z=e=>{let{AddressProps:t,setAddressProps:s}=e,{phone:l,streetAddress:r,Postalcode:n,Country:i,City:d}=t;return(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"pl-[10px]",children:"Phone"}),(0,a.jsx)("input",{className:"block w-full  rounded-xl p-4 border border-gray-300 bg-gray-200",type:"tel",placeholder:"phone number",value:l,onChange:e=>s("phone",e.target.value)}),(0,a.jsx)("label",{className:"pl-[10px]",children:"Street"}),(0,a.jsx)("input",{className:"block w-full  rounded-xl p-4 border border-gray-300 bg-gray-200",type:"text",placeholder:"Street",value:r,onChange:e=>s("streetAddress",e.target.value)}),(0,a.jsxs)("div",{className:" grid grid-cols-2 gap-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"pl-[10px]",children:"Postal code"}),(0,a.jsx)("input",{style:{margin:"0"},className:" block w-full  rounded-xl p-4 border border-gray-300 bg-gray-200",type:"text",placeholder:"Postal code",value:n,onChange:e=>s("Postalcode",e.target.value)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"pl-[10px]",children:"City"}),(0,a.jsx)("input",{style:{margin:"0"},className:"block w-full  rounded-xl p-4 border border-gray-300 bg-gray-200",type:"text",placeholder:"City",value:d,onChange:e=>s("City",e.target.value)})]})]}),(0,a.jsx)("label",{className:"pl-[10px]",children:"Country"}),(0,a.jsx)("input",{className:"block w-full rounded-xl mb-4 p-4 border border-gray-300 bg-gray-200",type:"text",placeholder:"Country",value:i,onChange:e=>s("Country",e.target.value)})]})}},4246:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});var a=s(7437),l=s(8009),r=s(703);function n(e){let{link:t,setLink:s}=e;async function n(e){let t=e.target.files;if((null==t?void 0:t.length)===1){let e=new FormData;e.set("file",t[0]);let a=fetch("/api/upload",{method:"POST",body:e}).then(async e=>{if(e.ok)return e.json().then(e=>{s(e)});throw Error("Something went wrong")});await l.default.promise(a,{loading:"Uploading...",success:"Upload complete",error:"Upload error"})}}return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"text-center",children:!t&&(0,a.jsx)("div",{children:"No Image"})}),t&&(0,a.jsx)(r.default,{className:"rounded-lg mx-auto  mb-1",src:t,width:100,height:100,alt:"avatar"}),(0,a.jsxs)("label",{children:[(0,a.jsx)("input",{type:"file",className:"hidden",onChange:n}),(0,a.jsx)("span",{className:" w-[60px] mx-auto block border border-gray-300 rounded-lg p-2 text-center cursor-pointer mt-[3rem]",children:"Edit"})]})]})}},4411:function(e,t,s){"use strict";var a=s(7437),l=s(2265),r=s(703),n=s(4246),i=s(3119),d=s(3414);t.Z=e=>{let{user:t,onSave:s}=e,[o,u]=(0,l.useState)(""),[c,m]=(0,l.useState)(""),[h,p]=(0,l.useState)(""),[x,f]=(0,l.useState)(""),[g,b]=(0,l.useState)(""),[v,j]=(0,l.useState)(""),[y,N]=(0,l.useState)(""),[C,P]=(0,l.useState)(!1),{data:S}=(0,i.U)();return(0,l.useEffect)(()=>{u((null==t?void 0:t.name)||""),m((null==t?void 0:t.phone)||""),p((null==t?void 0:t.streetAddress)||""),f((null==t?void 0:t.Postalcode)||""),b((null==t?void 0:t.City)||""),j((null==t?void 0:t.Country)||""),N((null==t?void 0:t.image)||""),P((null==t?void 0:t.admin)||!1)},[t]),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"rounded-xl mt-[30px]",children:[(0,a.jsx)("div",{children:!y&&(0,a.jsx)(r.default,{src:"/profile-icon.png",width:100,height:100,alt:"Picture of the author",className:"mx-auto rounded-[10px]"})}),(0,a.jsx)("div",{children:(0,a.jsx)(n.Z,{link:y,setLink:N})})]}),(0,a.jsx)("form",{className:"max-w-md mx-auto",onSubmit:e=>s(e,{name:o,phone:c,streetAddress:h,Postalcode:x,City:g,Country:v,image:y,admin:C}),children:(0,a.jsx)("div",{className:" gap-10 items-center pt-[1rem]",children:(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"pl-[10px]",children:"First name"}),(0,a.jsx)("input",{className:"block w-full  rounded-xl p-4 border border-gray-300 bg-gray-200",type:"text",placeholder:"First and last name",value:o,onChange:e=>u(e.target.value)})]}),(0,a.jsx)("label",{className:"pl-[10px]",children:"Email"}),(0,a.jsx)("input",{className:"block w-full  rounded-xl p-4 border border-gray-300 bg-gray-500",type:"email",disabled:!0,value:null==t?void 0:t.email}),(0,a.jsx)(d.Z,{AddressProps:{phone:c,streetAddress:h,Postalcode:x,City:g,Country:v},setAddressProps:function(e,t){"phone"===e&&m(t),"streetAddress"===e&&p(t),"Postalcode"===e&&f(t),"City"===e&&b(t),"Country"===e&&j(t)}}),S.admin&&(0,a.jsx)("div",{children:(0,a.jsxs)("label",{className:"p-2 inline-flex items-center gap-2 mb-2",htmlFor:"adminCb",children:[(0,a.jsx)("input",{id:"adminCb",type:"checkbox",className:"",value:"1",checked:C,onClick:e=>P(e.target.checked)}),(0,a.jsx)("span",{children:"Admin"})]})}),(0,a.jsx)("button",{className:"save-btn block w-full font-semibold border rounded-xl px-6 py-2",type:"submit",children:"Save"})]})})})]})}},1644:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});var a=s(7437),l=s(8792);s(8403);var r=s(7907);function n(e){let{isAdmin:t}=e,s=(0,r.usePathname)();return console.log(s),(0,a.jsxs)("div",{className:"mb-[3rem] flex mx-auto max-[768px]:gap-5 gap-2 tabs justify-center",children:[(0,a.jsx)(l.default,{className:"/Profile"===s?"active":"",href:"/Profile",children:"Profile"}),t&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l.default,{className:s.includes("menu-items")?"active":"",href:"/menu-items",children:"Menu Items"}),(0,a.jsx)(l.default,{className:s.includes("users")?"active":"",href:"/users",children:"Users"})]})]})}},3119:function(e,t,s){"use strict";s.d(t,{U:function(){return l}});var a=s(2265);function l(){let[e,t]=(0,a.useState)(!1),[s,l]=(0,a.useState)(!0);return(0,a.useEffect)(()=>{l(!0),fetch("/api/profile").then(e=>{e.json().then(e=>{t(e),l(!1)})})},[]),{Loading:s,data:e}}},815:function(e,t,s){"use strict";s.r(t);var a=s(7437),l=s(2265);s(4772);var r=s(1126),n=s(1644),i=s(7907),d=s(8009),o=s(4411);t.default=()=>{let[e,t]=(0,l.useState)(null),[s,u]=(0,l.useState)(!1),[c,m]=(0,l.useState)(!1),h=(0,r.useSession)(),{status:p}=h;async function x(e,t){e.preventDefault();let s=await fetch("/api/profile",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});console.log(t),s.ok?t.name.length>=3&&(d.default.dismiss(),d.default.success("Profile Saved!")):(d.default.dismiss(),d.default.error("Error"))}return((0,l.useEffect)(()=>{"authenticated"===p&&fetch("/api/profile").then(e=>{e.json().then(e=>{t(e),u(e.admin),m(!0)})})},[h,p]),"loading"!==p&&c)?"unauthenticated"===p?(0,i.redirect)("/login"):(0,a.jsxs)("section",{className:"mt-8",children:[(0,a.jsx)(n.Z,{isAdmin:s}),(0,a.jsx)("div",{className:"rounded-xl mt-[30px]",children:(0,a.jsx)(o.Z,{user:e,onSave:x})})]}):"loading..."}},8403:function(){},4772:function(){}},function(e){e.O(0,[792,9,703,126,971,69,744],function(){return e(e.s=7387)}),_N_E=e.O()}]);