(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[769],{9115:function(t,e,a){Promise.resolve().then(a.bind(a,7719))},9079:function(t,e,a){"use strict";var r,i;t.exports=(null==(r=a.g.process)?void 0:r.env)&&"object"==typeof(null==(i=a.g.process)?void 0:i.env)?a.g.process:a(3127)},3127:function(t){!function(){var e={229:function(t){var e,a,r,i=t.exports={};function n(){throw Error("setTimeout has not been defined")}function c(){throw Error("clearTimeout has not been defined")}function s(t){if(e===setTimeout)return setTimeout(t,0);if((e===n||!e)&&setTimeout)return e=setTimeout,setTimeout(t,0);try{return e(t,0)}catch(a){try{return e.call(null,t,0)}catch(a){return e.call(this,t,0)}}}!function(){try{e="function"==typeof setTimeout?setTimeout:n}catch(t){e=n}try{a="function"==typeof clearTimeout?clearTimeout:c}catch(t){a=c}}();var o=[],l=!1,u=-1;function d(){l&&r&&(l=!1,r.length?o=r.concat(o):u=-1,o.length&&m())}function m(){if(!l){var t=s(d);l=!0;for(var e=o.length;e;){for(r=o,o=[];++u<e;)r&&r[u].run();u=-1,e=o.length}r=null,l=!1,function(t){if(a===clearTimeout)return clearTimeout(t);if((a===c||!a)&&clearTimeout)return a=clearTimeout,clearTimeout(t);try{a(t)}catch(e){try{return a.call(null,t)}catch(e){return a.call(this,t)}}}(t)}}function f(t,e){this.fun=t,this.array=e}function h(){}i.nextTick=function(t){var e=Array(arguments.length-1);if(arguments.length>1)for(var a=1;a<arguments.length;a++)e[a-1]=arguments[a];o.push(new f(t,e)),1!==o.length||l||s(m)},f.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=h,i.addListener=h,i.once=h,i.off=h,i.removeListener=h,i.removeAllListeners=h,i.emit=h,i.prependListener=h,i.prependOnceListener=h,i.listeners=function(t){return[]},i.binding=function(t){throw Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw Error("process.chdir is not supported")},i.umask=function(){return 0}}},a={};function r(t){var i=a[t];if(void 0!==i)return i.exports;var n=a[t]={exports:{}},c=!0;try{e[t](n,n.exports,r),c=!1}finally{c&&delete a[t]}return n.exports}r.ab="//";var i=r(229);t.exports=i}()},7719:function(t,e,a){"use strict";a.r(e),a.d(e,{default:function(){return f}});var r=a(7437);a(5556);var i=a(2265);a(6819);var n=a(3191),c=a(828),s=a(8009),o=a(863);a(6533),a(8792);var l=()=>{let{Carttotaldata:t,refreshCart:e}=function(){let[t,e]=(0,i.useState)([]),a=async()=>{try{let t=await fetch("/api/cart-total"),a=await t.json();e(a)}catch(t){console.error(t)}};return(0,i.useEffect)(()=>{a()},[]),{Carttotaldata:t,refreshCart:async()=>{await a()}}}(),a=(0,c.I0)(),n=t[0];null==n||n._id;let[s,l]=(0,i.useState)({TotalMrp:0,Discount:0,Total:0}),u=(0,c.v9)(t=>t.cart.itemdata),d=0,m=0;u.forEach(t=>{d+=t.total,m+=t.DiscountCartPrice});let f=d-m;return(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-[22px] max-[768px]:text-[12px] font-bold pb-[1rem]",children:"Payment details"}),(0,r.jsxs)("div",{className:"order-total",children:[(0,r.jsxs)("div",{children:["Total MRP: ",d]}),(0,r.jsxs)("div",{children:["Discount: You Save ",f]}),(0,r.jsx)("div",{children:"Delivery Fee: FREE"}),(0,r.jsxs)("section",{className:"pt-[2rem]",children:["Total: ",m]})]}),(0,r.jsx)("div",{className:"order-btn max-[768px]:mt-[1rem] mt-[2rem]",children:(0,r.jsx)("a",{className:"mx-auto  max-[768px]:py-1 py-2 tracking-[1px]  justify-center flex",href:"/Checkout",onClick:function(){a(o.t.handlePlaceOrder({DiscountCartPrice:m}))},children:"Place Order"})})]})},u=a(7613),d=a(2916),m=a(703),f=()=>{let{data:t}=(0,u.j)(),{dataMenu:e}=(0,d.b)(),[a,o]=(0,i.useState)(!1),f=(0,c.v9)(t=>t.cart.itemdata);return(0,i.useEffect)(()=>{f.length>0?o(!0):o(!1)},[t]),(0,i.useEffect)(()=>{window.location.href.includes("cancelled=1")&&(s.default.dismiss(),s.default.error("Payment failed"))},[]),(0,r.jsxs)("div",{className:"pt-[5rem] flex",children:[(0,r.jsx)("ul",{children:f.map(t=>(0,r.jsx)("li",{children:(0,r.jsx)("div",{className:"grid grid-cols-[40rem] max-[768px]:grid-cols-[13rem] pb-[1rem]",children:(0,r.jsxs)("div",{className:"bg-gray-200 hover:bg-white hover:shadow-hover-shadow-black/75 p-4 rounded-[5px] text-center transition-all grid max-[768px]:grid-cols-1 max-[768px]:w-[12rem]",children:[(0,r.jsx)("img",{className:" max-[768px]:mx-[auto] max-[768px]:w-[8rem] w-[10rem]",src:t.image,alt:t.Name}),(0,r.jsx)("h2",{className:"name2 text-[15px] max-[768px]:text-[15px] max-[768px]:mt-[2rem] max-[768px]: mt-[-7rem] mb-[1rem]",children:t.Name}),(0,r.jsx)("div",{children:(0,r.jsxs)("p",{className:"text-gray-900 max-[768px]:text-[16px] text-[25px] price2 max-[768px]:mb-[1rem] mb-[4rem]",children:[(0,r.jsxs)("span",{className:"mainPrice2",children:["₹",t.Baseprice]})," ₹",t.DiscountPrice," ",(0,r.jsxs)("span",{className:"offer2",children:[t.PercentageOFF,"% Off"]})]})}),e.filter(e=>e._id===t.id).map(t=>(0,r.jsx)("div",{children:(0,r.jsx)(n.Z,{Id:t._id,Baseprice:t.Baseprice,DiscountPrice:t.DiscountPrice})},t._id))]})})},t.id))}),a?(0,r.jsx)("div",{className:"mx-[auto]",children:(0,r.jsx)(l,{})}):(0,r.jsx)("div",{className:"mt-[10rem] mx-[auto]",children:(0,r.jsx)(m.default,{src:"/empty-cart.png",width:200,height:200,alt:"Picture of the author"})})]})}},3191:function(t,e,a){"use strict";var r=a(7437),i=a(2265);a(9636);var n=a(8009),c=a(7613),s=a(828),o=a(863);e.Z=t=>{let{Id:e,Baseprice:a,DiscountPrice:l}=t,{data:u,refreshCart:d}=(0,c.j)(),[m,f]=(0,i.useState)(!1),h=(0,s.I0)(),p=(0,s.v9)(t=>t.cart.itemdata),x=(0,s.v9)(t=>t.cart.DeleteCartData);console.log(e);let y=p.find(t=>t.id===e);(0,i.useEffect)(()=>{x||y.quantity,y&&0===y.quantity?f(!0):f(!1)},[y]);let v=async(t,r)=>{t.preventDefault();let i=y?y.quantity+1:1;await w({_id:r,quantity:i}),h(o.t.handleIncrement({id:e,Baseprice:a,DiscountPrice:l}))},g=async(t,a)=>{if(t.preventDefault(),m){let t=new Promise(async(t,a)=>{(await fetch("/api/cart-items?_id="+e,{method:"DELETE"})).ok?(t(),console.log("Item Deleted"),await d()):a()});n.default.dismiss(),await n.default.promise(t,{loading:"Deleting...",success:"Deleted",error:"Error"})}h(o.t.handleDecrement({id:e})),console.log(e);let r=y?y.quantity-1:1;await w({_id:a,quantity:r})},w=async t=>{try{let e=await fetch("/api/cart-items",{method:"PUT",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}});n.default.dismiss(),e.ok?n.default.success("Quantity Updated"):n.default.error("Error Updating Quantity")}catch(t){n.default.error("Error Updating Quantity")}await d()};return(0,r.jsx)("div",{className:"Quantity",children:(0,r.jsx)("form",{onChange:w,children:(0,r.jsx)("div",{children:(0,r.jsxs)("div",{className:"item-container flex gap-5",children:[(0,r.jsx)("button",{type:"button",onClick:t=>g(t,e),children:"-"}),u.filter(t=>t._id===e).map(t=>(0,r.jsx)("div",{children:t.quantity},t._id)),(0,r.jsx)("button",{type:"button",onClick:t=>v(t,e),children:"+"})]})})})})}},7613:function(t,e,a){"use strict";a.d(e,{j:function(){return i}});var r=a(2265);function i(){let[t,e]=(0,r.useState)([]),a=async()=>{try{let t=await fetch("/api/cart-items"),a=await t.json();e(a)}catch(t){console.error(t)}};return(0,r.useEffect)(()=>{a()},[]),{data:t,refreshCart:async()=>{await a()}}}},2916:function(t,e,a){"use strict";a.d(e,{b:function(){return i}});var r=a(2265);function i(){let[t,e]=(0,r.useState)([]),a=async()=>{try{let t=await fetch("/api/menu-items"),a=await t.json();e(a)}catch(t){console.error(t)}};return(0,r.useEffect)(()=>{a()},[]),{dataMenu:t,refreshCart:async()=>{await a()}}}},863:function(t,e,a){"use strict";a.d(e,{t:function(){return i}});let r=(0,a(8166).oM)({name:"cart",initialState:{itemdata:[],totalMrp:0,totalQuantity:0,ShowTotal:!1,YouSave:0,DeleteCartData:!1,showQuantity:!1},reducers:{addTocart(t,e){t.ShowTotal=!0;let a=e.payload,r=t.itemdata.some(t=>t.id===a.id);r?(r.total+=a.Baseprice,t.showQuantity=!0,r.DiscountCartPrice+=a.DiscountPrice):t.itemdata.push({id:a.id,Name:a.Name,image:a.image,DiscountPrice:a.DiscountPrice,DiscountCartPrice:a.DiscountPrice,price:a.Baseprice,total:a.Baseprice,Baseprice:a.Baseprice,quantity:a.quantity,PercentageOFF:a.PercentageOFF}),t.YouSave=a.price,t.totalQuantity++,t.itemdata=t.itemdata},removefromcart(t,e){let a=e.payload,r=t.itemdata.find(t=>t.id===a);0===r.quantity?(t.itemdata=t.itemdata.filter(t=>t.id!==a),t.YouSave=0,r.DiscountCartPrice=0):(r.quantity--,r.total-=r.price,r.DiscountCartPrice-=r.DiscountPrice),t.totalQuantity--,0===t.itemdata.length&&(t.ShowTotal=!1)},handleIncrement(t,e){let a=e.payload,r=t.itemdata.find(t=>t.id===a.id);r&&(r.quantity++,r.total+=r.Baseprice,r.DiscountCartPrice+=r.DiscountPrice,t.showQuantity=!0)},handleDecrement(t,e){let a=e.payload,r=t.itemdata.find(t=>t.id===a.id);0===r.quantity?(t.itemdata=t.itemdata.filter(t=>t.id!==r.id),t.itemdata.quantity=0):(r.quantity--,r.total-=r.price,r.DiscountCartPrice-=r.DiscountPrice)},handlePlaceOrder(t,e){let a=e.payload;t.totalMrp=a.DiscountCartPrice},clearCart(t){t.itemdata=[],t.totalMrp=0,t.totalQuantity=0,t.ShowTotal=!1,t.YouSave=0,t.DeleteCartData=!0}}}),i=r.actions;e.Z=r.reducer},5556:function(){},9636:function(){},6819:function(){},6533:function(){}},function(t){t.O(0,[792,9,703,828,166,971,69,744],function(){return t(t.s=9115)}),_N_E=t.O()}]);