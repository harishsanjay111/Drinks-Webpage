(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[642],{7438:function(e,t,r){Promise.resolve().then(r.bind(r,3615))},3615:function(e,t,r){"use strict";r.r(t);var a=r(7437),l=r(2265),n=r(3414),s=r(3119),o=r(828),c=r(8009);t.default=()=>{let[e,t]=(0,l.useState)({}),{data:r}=(0,s.U)();console.log("profile data :",r);let d=(0,o.v9)(e=>e.cart.totalMrp),i=(0,o.v9)(e=>e.cart.itemdata);async function u(t){t.preventDefault();let r=new Promise((t,r)=>{fetch("/api/checkout",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({Address:e,cartproducts:i,TotalMrp:d})}).then(async e=>{e.ok?(t(),window.location=await e.json()):r()})});await c.default.promise(r,{loading:"Preparing Your Order...",success:"Redirecting to the payment...",error:"Something Went Wrong, Please Try Again Later.."})}return(0,l.useEffect)(()=>{if(null==r?void 0:r.City){let{phone:e,streetAddress:a,City:l,Country:n,Postalcode:s}=r;t({phone:e,streetAddress:a,City:l,Country:n,Postalcode:s})}},[r]),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-center py-[5rem]",children:"Checkout"}),(0,a.jsx)("div",{className:"bg-gray-100 p-4 rounded-lg",children:(0,a.jsx)("div",{children:(0,a.jsxs)("form",{onSubmit:u,children:[(0,a.jsx)(n.Z,{AddressProps:e,setAddressProps:function(e,r){t(t=>({...t,[e]:r}))}}),(0,a.jsxs)("button",{className:"button",children:["Pay â‚¹",d]})]})})})]})}},3414:function(e,t,r){"use strict";var a=r(7437);r(2265),t.Z=e=>{let{AddressProps:t,setAddressProps:r}=e,{phone:l,streetAddress:n,Postalcode:s,Country:o,City:c}=t;return(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"pl-[10px]",children:"Phone"}),(0,a.jsx)("input",{className:"block w-full  rounded-xl p-4 border border-gray-300 bg-gray-200",type:"tel",placeholder:"phone number",value:l,onChange:e=>r("phone",e.target.value)}),(0,a.jsx)("label",{className:"pl-[10px]",children:"Street"}),(0,a.jsx)("input",{className:"block w-full  rounded-xl p-4 border border-gray-300 bg-gray-200",type:"text",placeholder:"Street",value:n,onChange:e=>r("streetAddress",e.target.value)}),(0,a.jsxs)("div",{className:" grid grid-cols-2 gap-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"pl-[10px]",children:"Postal code"}),(0,a.jsx)("input",{style:{margin:"0"},className:" block w-full  rounded-xl p-4 border border-gray-300 bg-gray-200",type:"text",placeholder:"Postal code",value:s,onChange:e=>r("Postalcode",e.target.value)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"pl-[10px]",children:"City"}),(0,a.jsx)("input",{style:{margin:"0"},className:"block w-full  rounded-xl p-4 border border-gray-300 bg-gray-200",type:"text",placeholder:"City",value:c,onChange:e=>r("City",e.target.value)})]})]}),(0,a.jsx)("label",{className:"pl-[10px]",children:"Country"}),(0,a.jsx)("input",{className:"block w-full rounded-xl mb-4 p-4 border border-gray-300 bg-gray-200",type:"text",placeholder:"Country",value:o,onChange:e=>r("Country",e.target.value)})]})}},3119:function(e,t,r){"use strict";r.d(t,{U:function(){return l}});var a=r(2265);function l(){let[e,t]=(0,a.useState)(!1),[r,l]=(0,a.useState)(!0);return(0,a.useEffect)(()=>{l(!0),fetch("/api/profile").then(e=>{e.json().then(e=>{t(e),l(!1)})})},[]),{Loading:r,data:e}}}},function(e){e.O(0,[9,828,971,69,744],function(){return e(e.s=7438)}),_N_E=e.O()}]);